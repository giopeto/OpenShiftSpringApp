<section ng-controller="itemsCtrl as vm">

    <div class="container  fadeInUp">

        <div class="row">
            <div class="col-lg-8">
                <img class="img-fluid" src="files/{{vm.obj.fileIds[0]}}" alt="Item image">
            </div>
            <div class="col-lg-4">
                <h4>{{vm.obj.name}}</h4>
                <h4 class="text-danger">Price: {{vm.obj.price}} лв.</h4>
                <span class="input-group col-xs-5">
                    <span class="input-group-addon show-pointer" ng-click="vm.changeQuantity({quantity: vm.obj.quantity, tp: 'decrease'})">&nbsp;-</span>
                    <input type="text" class="form-control" value="asd" ng-model="vm.obj.quantity" />
                    <span class="input-group-addon show-pointer" ng-click="vm.changeQuantity({quantity: vm.obj.quantity, tp: 'increase'})">+</span>
                </span>
                <br/><br/>
                <button type="button" class="btn btn-warning btn-lg btn-block" ng-click="vm.addToBasket(vm.obj)">
                    <span class="glyphicon glyphicon-pencil"></span> Add to basket
                </button>
                <br/><br/>
                <p class="lead">Items info</p>
                <p>{{vm.obj.shortDescription}}</p>
                <p>
                    {{vm.obj.description}}
                </p>
            </div>
        </div>
        <div class="row">
            <div class="col-xl-3 col-xl-offset-0 col-lg-3 col-lg-offset-0 col-md-4 col-md-offset-4 col-sm-6 text-xs-center"
                 ng-repeat="row in vm.obj.fileIds" ng-if="$index>0">
                <div class="card center-block">
                    <img class="img-fluid show-pointer" src="files/{{row}}" alt="Item image" ng-click="vm.swapImage({id: row})">
                    <!--<div class="card-img-overlay">
                        <h4 class="card-title text-xs-center">
                            <a class="text-light" href="#galleryModal" data-toggle="modal"
                               data-src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/331810/sample21.jpg">view</a>
                        </h4>
                    </div>-->
                </div>
            </div>
        </div>
        <div class="row" ng-if="main.user.id">
            <div class="form-group">
                <label for="comment">Comment: </label>
                <textarea ng-model="vm.obj.comment" class="form-control" rows="5" id="comment"></textarea>
                <button type="button" class="btn btn-warning"
                        ng-click="vm.addComment({row: vm.obj, comment: vm.obj.comment})"><span
                        class="glyphicon glyphicon-pencil"></span> Add comment
                </button>
            </div>
        </div>
        <br>

        <div class="row" ng-repeat="comment in vm.obj.comments">
            <img src="files/{{comment.userFileId}}" class="profile-image img-circle img-fluid" alt="User image"/>
            <b class="lead">{{comment.userEmail}}</b>:<br> {{comment.comment}}
            <br><br><br>
        </div>

    </div>

   <!-- <pre>{{vm.obj | json}}</pre>-->

</section>